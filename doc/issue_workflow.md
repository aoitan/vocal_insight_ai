# Issue管理ワークフロー

本プロジェクトでは、タスク管理をGitHubのIssue機能にインスパイアされたMarkdownファイル (`.md`) を用いて行います。これにより、タスクの明確化、進捗管理、履歴追跡を効率的に行います。

## 1. Issueの場所

全てのIssueはプロジェクトルートの `issues/` ディレクトリ配下に配置されます。各Issueは独立したMarkdownファイルとして作成されます。

例:
```
project_root/
├── issues/
│   ├── issue_template.md
│   ├── 001-refactor-audio-analysis.md
│   └── 002-implement-cli-parser.md
└── doc/
    └── issue_workflow.md
```

## 2. Issueの作成

新しいタスクを開始する際は、`issues/issue_template.md` をコピーして新しいIssueファイルを作成します。ファイル名は、Issue番号とタスクの簡潔な説明を組み合わせたものとします（例: `001-refactor-audio-analysis.md`）。

### Issueテンプレート (`issues/issue_template.md`)

Issueを作成する際は、以下のテンプレートに従って記述してください。

```markdown
---
title: "[タイプ]: [タスクの簡潔な説明]"
labels: "[タイプ], [コンポーネント]"
assignees: "@[担当者]"
---

## 概要

[このIssueで達成したいこと、解決したい問題の簡潔な説明。]

## 目的

[このIssueが解決することで、どのような価値がもたらされるか、またはどの目標に貢献するか。]

## 詳細

[具体的なタスク内容、実装の詳細、考慮すべき点などを記述。]

### 関連するファイル/モジュール

- `[ファイル名またはモジュール名]`
- `[ファイル名またはモジュール名]`

### 依存関係

- [このIssueが依存する他のIssueやタスクがあれば記述。例: #123]

## 完了の定義 (Definition of Done)

- [ ] [具体的な完了条件1]
- [ ] [具体的な完了条件2]
- [ ] [テストが完了していること]
- [ ] [ドキュメントが更新されていること (必要な場合)]
- [ ] [コードレビューが完了していること]

## 備考

[その他、特記事項や懸念事項など。]
```

- **`title`**: Issueのタイトル。`[タイプ]: [タスクの簡潔な説明]` の形式で記述します。
    - タイプ例: `feat` (新機能), `fix` (バグ修正), `refactor` (リファクタリング), `docs` (ドキュメント), `chore` (その他)
- **`labels`**: Issueのラベル。カンマ区切りで複数指定可能です。
    - タイプ例: `feature`, `bug`, `refactoring`, `documentation`, `maintenance`
    - コンポーネント例: `core-library`, `cli`, `api`, `web-ui`
- **`assignees`**: 担当者。GitHubのユーザー名を `@` 付きで記述します。

## 3. Issue解決のワークフロー

Issueのライフサイクルは以下のステップで進行します。

1.  **Issueの作成**: 新しいタスクが発生したら、`issues/issue_template.md` を元に新しいIssueファイルを作成します。
2.  **担当者の割り当て**: Issueの担当者を `assignees` フィールドに記述します。
3.  **ブランチの作成**: Issueに着手する際は、対応するIssue番号や内容がわかるようなブランチ名で新しいブランチを作成します（例: `feature/001-refactor-audio-analysis`）。
4.  **開発**: コードの変更、テストの追加、ドキュメントの更新など、タスクの実施を行います。
5.  **進捗の更新**: 開発中にIssueの進捗状況をIssueファイル内の「完了の定義」チェックリストに反映させます。必要に応じてコメントを追加します。
6.  **コミット**: 関連する変更は、Issue番号をコミットメッセージに含めることで関連付けを明確にします（例: `feat: 音声分析ロジックをリファクタリング (#001)`）。
7.  **プルリクエスト (PR) の作成**: 開発が完了し、レビューの準備ができたら、`main` ブランチ（または適切なベースブランチ）に対してプルリクエストを作成します。PRのタイトルや説明にもIssue番号を含めます。
8.  **コードレビュー**: チームメンバーによるコードレビューを受け、フィードバックを反映します。
9.  **マージ**: レビューが承認されたら、PRをマージします。
10. **Issueのクローズ**: PRがマージされたら、対応するIssueファイル内の「完了の定義」が全てチェックされていることを確認し、Issueファイルを削除します。これにより、タスクが完了したことを示します。

## 4. Issueの削除

タスクが完了し、関連するプルリクエストがマージされた後、対応するIssueファイルは `issues/` ディレクトリから削除されます。これは、完了したタスクを物理的にアーカイブする役割を果たします。

## 5. コミットメッセージの規約

コミットメッセージは、以下の規約に従って記述してください。

```
<type>: <subject>

[body]

[footer]
```

- **`<type>`**: コミットのタイプ。以下のようなものを使用します。
    - `feat`: 新機能の追加
    - `fix`: バグ修正
    - `docs`: ドキュメントの変更
    - `style`: コードのスタイル変更 (フォーマット、セミコロンなど)
    - `refactor`: リファクタリング (機能変更なし)
    - `test`: テストの追加・修正
    - `chore`: ビルドプロセスや補助ツールの変更など (ソースコードの変更なし)
- **`<subject>`**: コミットの簡潔な説明 (50文字以内)。
- **`[body]`**: 詳細な説明 (任意)。
- **`[footer]`**: 関連するIssue番号など (例: `Closes #123`)。

例:
`feat: 音声分析ロジックをリファクタリング (#001)`
`fix: CLIのファイルパス解析のバグを修正 (#002)`
