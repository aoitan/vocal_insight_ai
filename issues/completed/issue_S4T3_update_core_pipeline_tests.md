---
title: "[task]: コアパイプラインとテストを新モジュール構造に対応"
labels: "task, tests, completed"
assignees: "@[担当者]"
completed_date: "2024-09-28"
---

## 概要

モジュール化後の構造に合わせてユニットテスト・統合テストを更新し、新しく分割されたモジュールに対するテストを追加します。モックやフィクスチャの再配置を行い、テスト戦略を整理します。

## 目的

- モジュール分割後もテストが網羅的に機能し、リグレッションを防ぐ。
- 新しいモジュール構成に合わせてテストの責務と配置を明確化する。

## 詳細

- 既存の `tests/test_vocal_insight_ai.py` をモジュール単位のテストへ分割または更新する。
- 新しいモジュール用のフィクスチャ/モック（例: `parselmouth.Sound` のモック）を再利用しやすい形で整理する。
- テスト対象が変わった部分について、境界条件やエラーケースのテストを追加する。

### 関連するファイル/モジュール

- `tests/`
- `vocal_insight_ai.py`
- `vocal_insight/features/`

### 依存関係

- #issue_S4T1_define_feature_module_package
- #issue_S4T2_migrate_existing_feature_functions

## 完了の定義 (Definition of Done)

- [x] 新モジュール構造に対応したテストが追加・更新されている。
- [x] テストスイートが全て成功し、CIでの実行結果が確認できる。
- [x] テストコードに重複や不要なモックが残っていない。
- [x] テスト方針のメモまたはREADME更新が行われている（必要な場合）。
- [x] コードレビューが完了している。

## 備考

- 可能であれば新モジュールごとにテストファイルを分割し、責務を明確にしておく。
